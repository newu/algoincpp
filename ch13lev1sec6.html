<html><head><title>13.6. Performance Characteristics</title><title>TeamUnknown</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link rel="STYLESHEET" type="text/css" href="portals/bvdep/xsltemplates/globalstyle.css" /><link href="includes/searchResults.css" rel="stylesheet" type="text/css" /><link rel="STYLESHEET" type="text/css" href="portals/bvdep/xsltemplates/style.css" /><link rel="STYLESHEET" type="text/css" href="portals/bvdep/xsltemplates/docsafari.css" /><body><table width="100%" border="0" cellspacing="0" cellpadding="0"><td class="docBookTitle"><a href="toc.html"><b>[ Team Unknown ]</b></a></td></table><td align="center"><a name="MainContent"></a><table width="95%"><tr><td align="left" class="v2"><!--Copyright (c) 2002 Safari Tech Books Online--><table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td valign="middle" class="v2" height="5"><img src="pixel.gif" width="1" height="5" alt="" border="0" /></td></tr><tr><td valign="middle" class="v2"><table cellpadding="0" cellspacing="0" border="0" width="100%"><tr><td align="left"><span style="white-space:nowrap">&nbsp;</span>
                  &nbsp;
                  <span style="white-space:nowrap"> &nbsp;&nbsp;</span>
            &nbsp;<span style="white-space:nowrap">&nbsp;</span></td></tr></table></td><td></td><td valign="middle" class="v2" align="right"> 
          &nbsp;
          <span style="white-space:nowrap"><a target="_self" href="ch13lev1sec5.html" title="Previous section"><img border="0" align="absmiddle" src="btn_prev.gif" alt="Previous section" id="btn_prev" /></a></span>
				
				&nbsp;
				
				<span style="white-space:nowrap"><a target="_self" href="ch14.html" title="Next section"><img border="0" align="absmiddle" src="btn_next.gif" alt="Next section" id="btn_next" /></a></span></td></tr></table><div id="section"><br /><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a href="17051538.html"><img src="pixel.gif" alt="" width="1" height="1" border="0" /></a>C++ Programming Robert Sedgewick - Princeton University Addison Wesley Professional Algorithms in C++, Parts 1&ndash;4: Fundamentals, Data Structure, Sorting, Searching, Third Edition<a name="ch13lev1sec6"></a>
<h3 id="title-IDAHVHUM" class="docSection1Title">13.6. Performance Characteristics</h3>
<p class="docText">How do we choose among randomized BSTs, splay BSTs, red&ndash;black BSTs, and skip lists for a particular application? We have concentrated on the differing nature of these algorithms' performance guarantees. Time and space are always primary considerations, but we must also consider a number of other factors. In this section, we shall briefly discuss implementation issues, empirical studies, estimates of running time, and space requirements.</p>
<p class="docText">All the tree-based algorithms depend on rotations; implementation of rotations along the search path is an essential ingredient of most balanced tree algorithms. We have used recursive implementations that implicitly save pointers to nodes on the search path in local variables on the recursion stack, but each of the algorithms can be implemented in a nonrecursive fashion, operating on a constant number of nodes and performing a constant number of link operations per node in one top-down pass through the tree.</p>
<p class="docText">Randomized BSTs are the simplest to implement of the three tree-based algorithms. The prime requirements are to have confidence in the random-number generator and to avoid spending too much time generating the random bits. Splay BSTs are slightly more complicated, but are a straightforward extension to the standard root insertion algorithm. Red&ndash;black BSTs involve slightly more code still, to check and manipulate the color bits. One advantage of red&ndash;black trees over the other two is that the color bits can be used for a consistency check for debugging, and for a guarantee of a quick search at any time during the lifetime of the tree. There is no way to know from examining a splay BST whether or not the code that produced it made all the proper transformations; a bug might lead (only!) to performance problems. Similarly, a bug in the random-number generator for randomized BSTs or skip lists could lead to otherwise-unnoticed performance problems.</p>
<p class="docText"><a name="iddle1153"></a><a name="iddle1311"></a><a name="iddle1417"></a><a name="iddle2358"></a>Skip lists are easy to implement, and are particularly attractive if a full range of symbol-table operations is to be supported, because <span class="docEmphasis">search</span>, <span class="docEmphasis">insert</span>, <span class="docEmphasis">remove</span>, <span class="docEmphasis">join</span>, <span class="docEmphasis">select</span>, and <span class="docEmphasis">sort</span> all have natural implementations that are easy to formulate. The inner loop for searching in skip lists is longer than that for trees (it involves an additional index into the pointer array or an additional recursive call to move down a level), so the time for search and insert is longer. Skip lists also put the programmer at the mercy of the random-number generator&mdash;debugging a program whose behavior is random is a challenge, and some programmers find it particularly unsettling to work with nodes having a random number of links.</p>
<p class="docText"><a class="docLink" href="#ch13table01">Table 13.1</a> gives empirical data on the performance of the four methods that we have discussed in this chapter, and on the elementary BST implementations from <a class="docLink" href="ch12.html#ch12">Chapter 12</a>, for keys that are random 32-bit integers. The information in this table confirms what we expect from the analytic results in <a class="docLink" href="ch13lev1sec2.html#ch13lev1sec2">Sections 13.2</a>, <a class="docLink" href="ch13lev1sec4.html#ch13lev1sec4">13.4</a>, and <a class="docLink" href="ch13lev1sec5.html#ch13lev1sec5">13.5</a>. Red&ndash;black BSTs are much faster than the others for random keys. Paths in red&ndash;black BSTs are 35 percent shorter than in randomized or splay BSTs, and there is less work to do in the inner loop. Randomized trees and skip lists require that we generate at least one new random number for every insertion, and splay BSTs involve a rotation at every node for every insertion and every search. By contrast, the overhead for red&ndash;black BSTs is that we check the value of 2 bits at every node during insertion, and occasionally need to do a rotation. For nonuniform access, splay BSTs may involve shorter paths, but this savings is likely to be offset by the fact that both search and insertion involve rotations at every node in the inner loop, except possibly in extreme cases.</p>
<a name="ch13table01"></a><p><table cellspacing="0" frame="hsides" rules="none" cellpadding="5"><caption><h5 class="docTableTitle">Table 13.1. Empirical study of balanced tree implementations</h5></caption><colgroup align="left" span="13"><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col><col width="40"></col></colgroup><thead></thead><tr><td class="docTableCell" align="left" valign="top" colspan="13"><p class="docText">These relative timings for building and searching BSTs from random sequences of <span class="docEmphasis">N</span> 32-bit integers, for various values of <span class="docEmphasis">N</span>, indicate that all the methods have good performance, even for huge tables, but that red&ndash;black trees are significantly faster than are the other methods. All the methods use standard BST search, except splay BSTs, where we splay on search to bring frequently accessed keys near the top, and skip lists, which use essentially the same algorithm with a different underlying data structure.</p></td></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="bottomBorder" align="center" valign="top" colspan="6"><p class="docText">construction</p></td><td class="bottomBorder" align="center" valign="top" colspan="6"><p class="docText">search misses</p></td></tr><tr><td class="bottomBorder" align="right" valign="top"><p class="docText"><span class="docEmphasis">N</span></p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">B</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">T</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">R</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">S</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">C</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">L</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">B</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">T</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">R</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">S</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">C</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">L</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">1250</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">0</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">2</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">2</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">0</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">0</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">0</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">2</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">2500</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">2</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">4</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">6</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">4</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">2</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">5000</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">4</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">7</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">14</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">8</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">5</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">10</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">3</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">2</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">7</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">12500</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">11</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">23</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">43</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">24</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">16</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">28</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">10</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">9</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">9</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">9</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">7</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">18</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">25000</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">27</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">51</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">101</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">50</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">32</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">57</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">19</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">19</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">26</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">21</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">16</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">43</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">50000</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">63</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">114</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">220</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">117</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">74</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">133</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">48</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">49</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">60</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">46</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">36</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">98</p></td></tr><tr><td class="docTableCell" align="right" valign="top"><p class="docText">100000</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">159</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">277</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">447</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">282</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">177</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">310</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">118</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">106</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">132</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">112</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">84</p></td><td class="docTableCell" align="right" valign="top"><p class="docText">229</p></td></tr><tr><td class="bottomBorder" align="right" valign="top"><p class="docText">200000</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">347</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">621</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">996</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">636</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">411</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">670</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">235</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">234</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">294</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">247</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">193</p></td><td class="bottomBorder" align="right" valign="top"><p class="docText">523</p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="13"><p class="docText"><span class="docEmphasis">Key</span>:</p>
<blockquote><p></p><p class="docList">B Standard BST(<a class="docLink" href="ch12lev1sec5.html#ch12ex15">Program 12.8</a>)</p></blockquote></td></tr></table></p><p></p><p class="docList">T BST built by root insertion (<a class="docLink" href="ch12lev1sec8.html#ch12ex23">Program 12.13</a>)</p><p></p><p class="docList">R Randomized BST (<a class="docLink" href="ch13lev1sec1.html#ch13ex03">Program 13.2</a>)</p><p></p><p class="docList">S Splay BST(<a class="docLink" href="ch13lev1sec2.html#ch13qa3q9">Exercise 13.33</a> and <a class="docLink" href="ch13lev1sec2.html#ch13ex09">Program 13.5</a>)</p><p></p><p class="docList">C Red&ndash;black BST (<a class="docLink" href="ch13lev1sec4.html#ch13ex15">Program 13.6</a>)</p><p></p><p class="docList">L Skip list (<a class="docLink" href="ch13lev1sec5.html#ch13ex21">Programs 13.7</a> and <a class="docLink" href="ch13lev1sec5.html#ch13ex23">13.9</a>)</p></td></tr></table><br />
<p class="docText">Splay BSTs require no extra space for balance information, red&ndash; black BSTs require 1 extra bit, and randomized BSTs require a count field. For many applications, the count field is maintained for other reasons, so it may not represent an extra cost for randomized BSTs. Indeed, we might need to <span class="docEmphasis">add</span> this field if we use splay BSTs, red&ndash;black BSTs or skip lists. If necessary, we can make red&ndash;black BSTs as space-efficient as splay BSTs by eliminating the color bit (see <a class="docLink" href="ch13lev1sec4.html#ch13qa5q18">Exercise 13.65</a>).In modern applications, space is less critical than it once was, but the careful programmer still needs to be vigilant against waste. For example, we need to be aware that some systems might use a whole 32-bit word for a small count field or a 1-bit color field in a node, and that some other systems might pack the fields in memory such that unpacking them requires a significant amount of extra time. If space is tight, skip lists with large <span class="docEmphasis">t</span> can reduce by nearly one-half the space for links, at the cost of a slower&mdash;but still logarithmic&mdash;search. With some programming, the tree-based methods can also be implemented with one link per node (see <a class="docLink" href="ch12lev1sec7.html#ch12qa7q3">Exercise 12.68</a>).</p>
<p class="docText">In summary, all the methods that we have discussed in this chapter will provide good performance for typical applications, and each has its virtues for people interested in developing a high-performance symbol-table implementation. Splay BSTs will provide good performance as a self-organizing search method, particularly when frequent access to a small set of keys is a typical pattern; randomized BSTs are likely to be faster and easier to implement for a full-function symbol table BST; skip lists are easy to understand and can provide logarithmic search with less space than the other methods, and red&ndash;black BSTs are attractive for symbol-table library implementations, because they provide guaranteed performance bounds in the worst case and the fastest search and insertion algorithms for random data.</p>
<p class="docText">Beyond specific uses in applications, this panoply of solutions to the problem of developing efficient implementations of the symbol-table ADT is important because it illustrates fundamental approaches to algorithm design that are available to us when we consider solutions to other problems. In our constant quest for simple, optimal algorithms, we often encounter useful near-optimal algorithms, such as the ones discussed here. Moreover, as we saw with sorting, comparison-based algorithms such as these are only the beginning of the story&mdash;by moving to a lower-level abstraction, where we can process pieces of keys, we can develop implementations that are even faster than the ones discussed in this chapter, as we shall see in <a class="docLink" href="ch14.html#ch14">Chapters 14</a> and <a class="docLink" href="ch15.html#ch15">15</a>.</p>
<p class="docQandasetTitle">Exercises</p><p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch13qa7q1"></a><b></b></td><td><p class="docText"><span class="docEmphStrong">13.85</span> Develop a symbol-table implementation using randomized BSTs that includes a destructor, a copy constructor, and an overloaded assignment operator, and supports the <span class="docEmphasis">construct</span>, <span class="docEmphasis">count</span>, <span class="docEmphasis">search</span>, <span class="docEmphasis">insert</span>, <span class="docEmphasis">remove</span>, <span class="docEmphasis">join</span>, <span class="docEmphasis">select</span>, and <span class="docEmphasis">sort</span> operations for first-class symbol-table ADTs with client item handles (see <a class="docLink" href="ch12lev1sec1.html#ch12qa1q6">Exercises 12.6</a> and <a class="docLink" href="ch12lev1sec1.html#ch12qa1q7">12.7</a>).</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch13qa7q2"></a><b></b></td><td><p class="docText"><span class="docEmphStrong">13.86</span> Develop a symbol-table implementation using skip lists that includes a destructor, a copy constructor, and an overloaded assignment operator, and supports the <span class="docEmphasis">construct</span>, <span class="docEmphasis">count</span>, <span class="docEmphasis">search</span>, <span class="docEmphasis">insert</span>, <span class="docEmphasis">remove</span>, <span class="docEmphasis">join</span>, <span class="docEmphasis">select</span>, and <span class="docEmphasis">sort</span> operations for first-class symbol-table ADTs with client item handles (see <a class="docLink" href="ch12lev1sec1.html#ch12qa1q6">Exercises 12.6</a> and <a class="docLink" href="ch12lev1sec1.html#ch12qa1q7">12.7</a>).</p>
</td></tr></table></p>
<a href="17051538.html"><img src="pixel.gif" alt="" width="1" height="1" border="0" /></a><ul></ul></div></td></tr></table><table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td valign="middle" class="v2" height="5"><img src="pixel.gif" width="1" height="5" alt="" border="0" /></td></tr><tr><td valign="middle" class="v2"><table cellpadding="0" cellspacing="0" border="0" width="100%"><tr><td align="left"><span style="white-space:nowrap">&nbsp;</span>
                  &nbsp;
                  <span style="white-space:nowrap"> &nbsp;&nbsp;</span>
            &nbsp;<span style="white-space:nowrap">&nbsp;</span></td></tr></table></td><td></td><td valign="middle" class="v2" align="right"> 
          &nbsp;
          <span style="white-space:nowrap"><a target="_self" href="ch13lev1sec5.html" title="Previous section"><img border="0" align="absmiddle" src="btn_prev.gif" alt="Previous section" id="btn_prev" /></a></span>
				
				&nbsp;
				
				<span style="white-space:nowrap"><a target="_self" href="ch14.html" title="Next section"><img border="0" align="absmiddle" src="btn_next.gif" alt="Next section" id="btn_next" /></a></span></td></tr></table><table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td valign="top" align="right"><span style="white-space:nowrap"><a target="_self" href="#toppage" title="Top"></a></span></td></tr></table><!--IP User 2--></td></body></head></html>